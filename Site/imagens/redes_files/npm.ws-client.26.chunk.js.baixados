(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"tpQ+":function(e,t,o){"use strict";(function(e){let i;o.d(t,"a",(function(){return c})),"undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof MozWebSocket?i=MozWebSocket:void 0!==e?i=e.WebSocket||e.MozWebSocket:"undefined"!=typeof window?i=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket);const n=()=>(new Date).toISOString().replace("T"," ").substr(0,19),s=["message","error","close","open","changeTimeToReconnect"];function c(e,t,o=!1){if(!(this instanceof c))return new c(e,t,o);this.uri=e,this.opts=t||{},this.exponentialBackoff=o,this._onMessage=void 0,this._onError=void 0,this._onClose=void 0,this._onOpen=void 0,this._onChangeTimeToReconnect=void 0,this.DEFAULT_TIMER_LIMIT=5e3,this.COUNTER_LIMIT_TIME=12e4,this.INTERVAL_TIME=1e3,this.TEXT_TRYING="Tentando reconectar em {{seconds}} segundos",this.interval=null,this.timer=0,this.timerLimit=this.DEFAULT_TIMER_LIMIT,this.connect()}c.prototype.formatUri=function(){return`${this.uri.replace("https://","wss://")}/socket.io/?${this.opts.query}`},c.prototype.open=function(e){this._onOpen&&this._onOpen(e),this.timerLimit=this.DEFAULT_TIMER_LIMIT,this.socket.onclose=this.close.bind(this),this.socket.onmessage=this.message.bind(this)},c.prototype.message=function(e){let t=JSON.parse(e.data);this._onMessage&&this._onMessage(t)},c.prototype.error=function(e){this._onError&&this._onError(e),e.code,this.endTimeHandler()},c.prototype.close=function(e){this._onClose&&this._onClose(e),this.socket.onchangetimetoreconnect=this.changeTimeToReconnect.bind(this);switch(e.code||!1){case 1e3:case 1001:break;default:this.socket.close(1e3,""),this.reloadReconnection()}},c.prototype.connect=function(e){try{const e=this.formatUri(this.uri);this.socket=new i(e),this.socket.onopen=this.open.bind(this),this.socket.onerror=this.error.bind(this)}catch(t){e&&e(t)}},c.prototype.changeTimeToReconnect=function(e){this._onChangeTimeToReconnect&&this._onChangeTimeToReconnect(e)},c.prototype.on=function(e,t){switch(s.includes(e)||console.error("Evento nÃ£o suportado."),e){case"message":this._onMessage=t;break;case"error":this._onError=t;break;case"close":this._onClose=t;break;case"open":this._onOpen=t;break;case"changeTimeToReconnect":this._onChangeTimeToReconnect=t}},c.prototype.emit=function(e){try{this.socket.send(e)}catch(e){console.error(n,"Error emit message: ",e)}},c.prototype.disconnect=function(){this.socket.close(1e3,"")},c.prototype.reconnect=function(){null==this.interval&&(this.timer=this.timerLimit,this.interval=setInterval(()=>{const e=this.updateTextTrying(this.timer,this.TEXT_TRYING);this.changeTimeToReconnect(e),this.timer>0?this.timer=this.timer<this.INTERVAL_TIME?0:this.timer-this.INTERVAL_TIME:(clearInterval(this.interval),this.connect(e=>{e&&this.endTimeHandler()}))},this.INTERVAL_TIME))},c.prototype.endTimeHandler=function(){let e=this.timerLimit;this.exponentialBackoff&&(e=2*this.timerLimit+this.getRandonNumber(1,1e3)),e>this.COUNTER_LIMIT_TIME?this.timerLimit=this.COUNTER_LIMIT_TIME:this.timerLimit=e,this.reloadReconnection()},c.prototype.updateTextTrying=function(e,t){if(-1!==t.indexOf("{{seconds}}")){let o=Math.floor(e/1e3);e=t.replace("{{seconds}}",o)}else e=t;return e},c.prototype.reloadReconnection=function(){clearInterval(this.interval),this.interval=null,this.reconnect()},c.prototype.getRandonNumber=function(e,t){return Math.ceil(Math.random()*(t-e)+e)}}).call(this,o("yLpj"))}}]);